# LineOA v2 - р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╣Гр╕лр╕бр╣И

## р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕Чр╕╡р╣Ир╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Вр╣Йр╕▓р╕бр╕▓

### 1. ЁЯЦ╝я╕П р╕Бр╕▓р╕гр╕кр╣Ир╕Зр╕гр╕╣р╕Ыр╕ар╕▓р╕Ю (Image Upload)
- **р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Ир╕▓р╕Бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣Мр╣Др╕Фр╣Й**
- р╕гр╕нр╕Зр╕гр╕▒р╕Ър╣Др╕Яр╕ер╣М: JPG, JPEG, PNG, GIF, WEBP
- р╕Вр╕Щр╕▓р╕Фр╣Др╕Яр╕ер╣Мр╕кр╕╣р╕Зр╕кр╕╕р╕Ф: 10MB
- р╕бр╕╡ Preview р╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Бр╣Ир╕нр╕Щр╕кр╣Ир╕З
- р╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Ир╕░р╕Цр╕╣р╕Бр╣Ар╕Бр╣Зр╕Ър╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М `/uploads` р╕Ър╕Щ server

**р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ:**
1. р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б ЁЯУО (р╣Бр╕Щр╕Ър╣Др╕Яр╕ер╣М) р╣Гр╕Щр╕Кр╣Ир╕нр╕Зр╕Юр╕┤р╕бр╕Юр╣Мр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б
2. р╣Ар╕ер╕╖р╕нр╕Бр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕Ир╕▓р╕Бр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З
3. р╕Фр╕╣ Preview р╣Бр╕ер╕░р╕Др╕ер╕┤р╕Б "р╕кр╣Ир╕З" р╣Ар╕Юр╕╖р╣Ир╕нр╕кр╣Ир╕Зр╕гр╕╣р╕Ы
4. р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕ер╕Ър╕гр╕╣р╕Ыр╕Бр╣Ир╕нр╕Щр╕кр╣Ир╕Зр╣Др╕Фр╣Йр╣Вр╕Фр╕вр╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б тЬХ

### 2. ЁЯШК р╕Бр╕▓р╕гр╕кр╣Ир╕Зр╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М (Sticker Picker)
- **р╣Ар╕ер╕╖р╕нр╕Бр╣Бр╕ер╕░р╕кр╣Ир╕Зр╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М LINE р╣Др╕Фр╣Й**
- р╕бр╕╡р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣Мр╣Гр╕Щр╕Кр╕╕р╕Ф Basic р╣Гр╕лр╣Йр╣Ар╕ер╕╖р╕нр╕Б 20 р╣Бр╕Ър╕Ъ
- р╣Бр╕кр╕Фр╕Зр╕Ьр╕е Sticker Picker р╣Бр╕Ър╕Ъ Grid
- р╕гр╕нр╕Зр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕гр╕▒р╕Ър╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣Мр╕Ир╕▓р╕Бр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й LINE р╕Фр╣Йр╕зр╕в

**р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ:**
1. р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б ЁЯШК (р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М) р╣Гр╕Щр╕Кр╣Ир╕нр╕Зр╕Юр╕┤р╕бр╕Юр╣Мр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б
2. р╣Ар╕ер╕╖р╕нр╕Бр╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣Мр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Ир╕▓р╕Б Grid
3. р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣Мр╕Ир╕░р╕Цр╕╣р╕Бр╕кр╣Ир╕Зр╕Чр╕▒р╕Щр╕Чр╕╡

### 3. ЁЯУЭ р╕гр╕░р╕Ър╕Ър╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╣Бр╕Ър╕Ър╕Зр╣Ир╕▓р╕в (Simple Registration)
- **р╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╕Ър╕▒р╕Нр╕Кр╕╡р╣Гр╕лр╕бр╣Ир╣Др╕Фр╣Йр╕Зр╣Ир╕▓р╕вр╣Ж**
- р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Ар╕Юр╕╡р╕вр╕З Username р╣Бр╕ер╕░ Password
- р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Ир╕░р╕Цр╕╣р╕Бр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Гр╕Щр╣Др╕Яр╕ер╣М `/data/users.json`
- р╕бр╕╡р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕зр╕▓р╕бр╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕вр╕Вр╕нр╕Зр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ (р╕нр╕вр╣Ир╕▓р╕Зр╕Щр╣Йр╕нр╕в 6 р╕Хр╕▒р╕зр╕нр╕▒р╕Бр╕йр╕г)

**р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ:**
1. р╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓ Login р╕Др╕ер╕┤р╕Б "р╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щ" р╕лр╕гр╕╖р╕н "Register"
2. р╕Бр╕гр╕нр╕Б Username (р╕нр╕вр╣Ир╕▓р╕Зр╕Щр╣Йр╕нр╕в 3 р╕Хр╕▒р╕зр╕нр╕▒р╕Бр╕йр╕г)
3. р╕Бр╕гр╕нр╕Б Password (р╕нр╕вр╣Ир╕▓р╕Зр╕Щр╣Йр╕нр╕в 6 р╕Хр╕▒р╕зр╕нр╕▒р╕Бр╕йр╕г)
4. р╕вр╕╖р╕Щр╕вр╕▒р╕Щ Password р╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З
5. р╕Др╕ер╕┤р╕Б "р╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щ"
6. р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕│р╣Ар╕гр╣Зр╕Ир╕Ир╕░р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕лр╕Щр╣Йр╕▓ Login р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

### 4. ЁЯТ╛ р╕гр╕░р╕Ър╕Ър╕Ир╕▒р╕Фр╣Ар╕Бр╣Зр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- **р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б Username р╣Бр╕ер╕░ Password р╣Гр╕Щр╣Др╕Яр╕ер╣М JSON**
- р╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕Зр╣Др╕Яр╕ер╣М: `/data/users.json`
- р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е:
```json
[
  {
    "id": "1234567890",
    "username": "Test01",
    "password": "123456789",
    "createdAt": "2025-11-13T..."
  }
]
```

## р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╕░р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### 1. р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Dependencies
```bash
# р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Backend dependencies
npm install

# р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Frontend dependencies
cd client
npm install
cd ..
```

### 2. р╕гр╕▒р╕Щ Server
```bash
# р╕гр╕▒р╕Щ Backend р╣Бр╕ер╕░ Frontend р╕Юр╕гр╣Йр╕нр╕бр╕Бр╕▒р╕Щ
npm run dev

# р╕лр╕гр╕╖р╕нр╕гр╕▒р╕Щр╣Бр╕вр╕Бр╕Бр╕▒р╕Щ
npm run server    # Backend (Port 5000)
npm run client    # Frontend (Port 3000)
```

### 3. р╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
- р╣Ар╕Ыр╕┤р╕Фр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣Мр╣Др╕Ыр╕Чр╕╡р╣И `http://localhost:3000`
- р╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╕Ър╕▒р╕Нр╕Кр╕╡р╣Гр╕лр╕бр╣Ир╕лр╕гр╕╖р╕н Login р╕Фр╣Йр╕зр╕вр╕Ър╕▒р╕Нр╕Кр╕╡ Default:
  - Username: `Test01`
  - Password: `123456789`

## р╕Бр╕▓р╕гр╕Ыр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕З Sticker

р╕Цр╣Йр╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣Мр╕Кр╕╕р╕Фр╕нр╕╖р╣Ир╕Щ р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Бр╕Бр╣Йр╣Др╕Вр╣Др╕Фр╣Йр╕Чр╕╡р╣Ир╣Др╕Яр╕ер╣М `client/src/components/Chat.js`:

```javascript
// р╕лр╕▓ LINE Sticker Package ID р╣Бр╕ер╕░ Sticker ID р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г
// р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: Package 11537 (Brown & Cony)
{[1, 2, 3, 4, 5, ...].map(id => (
  <div 
    key={id} 
    className="sticker-item"
    onClick={() => handleSendSticker('11537', id.toString())}
  >
    <img 
      src={`https://stickershop.line-scdn.net/stickershop/v1/sticker/${id}/android/sticker.png`}
      alt={`Sticker ${id}`}
    />
  </div>
))}
```

## р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣Мр╕кр╕│р╕Др╕▒р╕Н

```
lineoav2/
тФЬтФАтФА server.js                    # Backend API (р╣Ар╕Юр╕┤р╣Ир╕б image upload & register)
тФЬтФАтФА package.json                 # Backend dependencies (р╣Ар╕Юр╕┤р╣Ир╕б multer)
тФЬтФАтФА data/
тФВ   тФЬтФАтФА channels.json           # р╕Вр╣Йр╕нр╕бр╕╣р╕е LINE Channels
тФВ   тФЬтФАтФА messages.json           # р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б (р╕гр╕зр╕бр╕гр╕╣р╕Ыр╣Бр╕ер╕░р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М)
тФВ   тФЬтФАтФА groups.json             # р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕ер╕╕р╣Ир╕бр╕кр╕Щр╕Чр╕Щр╕▓
тФВ   тФФтФАтФА users.json              # тЬи р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й (р╣Гр╕лр╕бр╣И!)
тФЬтФАтФА uploads/                     # тЬи р╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╣Ар╕Бр╣Зр╕Ър╕гр╕╣р╕Ыр╕ар╕▓р╕Ю (р╣Гр╕лр╕бр╣И!)
тФФтФАтФА client/
    тФФтФАтФА src/
        тФФтФАтФА components/
            тФЬтФАтФА Chat.js         # тЬи р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕кр╣Ир╕Зр╕гр╕╣р╕Ы & р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М
            тФЬтФАтФА Chat.css        # тЬи р╣Ар╕Юр╕┤р╣Ир╕б style р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕╣р╕Ы & р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М
            тФЬтФАтФА Register.js     # тЬи р╣Бр╕Бр╣Йр╣Др╕Вр╣Гр╕лр╣Йр╕Зр╣Ир╕▓р╕вр╕Вр╕╢р╣Йр╕Щ
            тФФтФАтФА Login.js        # р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н Register
```

## Backend API р╣Гр╕лр╕бр╣И

### POST `/api/register`
р╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Гр╕лр╕бр╣И
```json
Request:
{
  "username": "newuser",
  "password": "password123"
}

Response:
{
  "success": true,
  "message": "Registration successful",
  "user": {
    "id": "1234567890",
    "username": "newuser"
  }
}
```

### POST `/api/upload/image`
р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ыр╕ар╕▓р╕Ю
```
Content-Type: multipart/form-data
Field: image (file)

Response:
{
  "success": true,
  "imageUrl": "/uploads/1234567890-abc123.jpg",
  "message": "Image uploaded successfully"
}
```

### POST `/api/messages/send` (р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х)
р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б, р╕гр╕╣р╕Ыр╕ар╕▓р╕Ю, р╕лр╕гр╕╖р╕нр╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М
```json
// р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б
{
  "channelId": "123",
  "userId": "U1234",
  "text": "Hello",
  "messageType": "text"
}

// р╕кр╣Ир╕Зр╕гр╕╣р╕Ыр╕ар╕▓р╕Ю
{
  "channelId": "123",
  "userId": "U1234",
  "text": "[р╕гр╕╣р╕Ыр╕ар╕▓р╕Ю]",
  "messageType": "image",
  "imageUrl": "/uploads/1234567890-abc123.jpg"
}

// р╕кр╣Ир╕Зр╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М
{
  "channelId": "123",
  "userId": "U1234",
  "text": "[р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣М: 446/1]",
  "messageType": "sticker",
  "stickerPackageId": "446",
  "stickerId": "1"
}
```

## р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕

1. **р╕Др╕зр╕▓р╕бр╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в**: р╣Гр╕Щр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Ир╕гр╕┤р╕З р╕Др╕зр╕гр╣Ар╕Вр╣Йр╕▓р╕гр╕лр╕▒р╕к password р╕Фр╣Йр╕зр╕в bcrypt р╕лр╕гр╕╖р╕н argon2
2. **р╕гр╕╣р╕Ыр╕ар╕▓р╕Ю**: р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕лр╣Йр╣Бр╕Щр╣Ир╣Гр╕Ир╕зр╣Ир╕▓р╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М `/uploads` р╕бр╕╡р╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╣Гр╕Щр╕Бр╕▓р╕гр╣Ар╕Вр╕╡р╕вр╕Щр╣Др╕Яр╕ер╣М
3. **Stickers**: LINE р╕бр╕╡р╕кр╕Хр╕┤р╕Бр╣Ар╕Бр╕нр╕гр╣Мр╕лр╕ер╕▓р╕вр╕Кр╕╕р╕Ф р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕лр╕▓ Package ID р╣Др╕Фр╣Йр╕Ир╕▓р╕Б LINE Sticker Shop
4. **Webhook**: р╕нр╕вр╣Ир╕▓р╕ер╕╖р╕бр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Webhook URL р╣Гр╕Щ LINE Developers Console: `http://your-domain/webhook/:channelId`

## р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Гр╕Щр╕нр╕Щр╕▓р╕Др╕Х

- [ ] р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕кр╣Ир╕З Video р╣Бр╕ер╕░ Audio
- [ ] р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕кр╣Ир╕Зр╣Др╕Яр╕ер╣М PDF р╣Бр╕ер╕░р╣Ар╕нр╕Бр╕кр╕▓р╕г
- [ ] р╣Ар╕Юр╕┤р╣Ир╕бр╕гр╕░р╕Ър╕Ър╣Ар╕Вр╣Йр╕▓р╕гр╕лр╕▒р╕к password
- [ ] р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕г User roles р╣Бр╕ер╕░ permissions
- [ ] р╣Ар╕Юр╕┤р╣Ир╕б Rich Menu support
- [ ] р╣Ар╕Юр╕┤р╣Ир╕б Flex Message support

---

**р╕Юр╕▒р╕Тр╕Щр╕▓р╣Вр╕Фр╕в:** Your Name
**р╣Ар╕зр╕нр╕гр╣Мр╕Кр╕▒р╕Щ:** 2.1.0
**р╕зр╕▒р╕Щр╕Чр╕╡р╣И:** 13 р╕Юр╕др╕ир╕Ир╕┤р╕Бр╕▓р╕вр╕Щ 2025
